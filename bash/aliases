if [ -f /usr/local/git/contrib/completion/git-completion.bash ]; then
  . /usr/local/git/contrib/completion/git-completion.bash
fi
GIT_PS1_SHOWDIRTYSTATE=true

if [ -f /opt/local/etc/bash_completion ]; then
    . /opt/local/etc/bash_completion
fi


export EDITOR='vim'

export NODE_PATH=/usr/local/lib/node:/usr/local/lib/node_modules

alias nh='nautilus .'
alias fh='open .'

alias cddf='cd ~/bin/dotfiles/'
alias cdw='cd /var/www'
alias cdd='cd ~/Desktop'
alias cdh='cd --'

# count files in . (non-recursive)
alias countf='ls -1r | wc -l'

# sum size of files in . -r (MB)
alias cdsize='du -ch | grep total'

function fif {
    grep -lir "$*" *
}

function fifp {
    grep -RnisI "$*" *
}

function count_lines {
    find *"$*" -print0 | xargs -0 wc -l
}

parse_git_branch() {
    git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||'
}

parse_git_branch_fancy() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/[git:\1]/'
}

function gaa {
    git add .
}

function ga {
    git add "$*"
}

function gcommit {
    git commit -m "$*"
}

function gaac {
    gaa && gcommit "$*"
}

function gamend {
    git commit -m "$*" --amend
}

function gco {
    git checkout "$*"
}

function gri {
    git rebase -i HEAD~$1
}

function gdbl {
    git branch -D $1
}

function gdbr {
    git push origin :$1
}

function gpoc {
    git push origin $(parse_git_branch)
}

function gpuc {
    git push upstream $(parse_git_branch)
}

function gsa {
    git stash apply stash@{$1}
}

function grs {
    git reset --soft $1
}

function grh {
    git reset --hard $1
}

function gl {
    git log --graph --pretty=format':%C(yellow)%h%Cblue%d%Creset %s %C(white) %an, %ar%Creset'
}

function ts {
    termup start $1
}

function be {
    bundle exec "$*"
}

alias v='vim'
alias gcb="git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||'"
alias gs='git status'
alias gpom='git push origin master'
alias gcom='git checkout master'
alias gb='git branch'
alias gbr='git branch -r'
alias gsl='git stash list'
alias gss='git stash save'
alias gdcs='git checkout -- .'
alias gh="git rev-parse HEAD"
alias bbrew='bundle exec rake barista:brew'
alias deployms='bundle exec rake deploy:staging[+]'
alias deploymb='bundle exec rake deploy:beta[+]'
alias jasb='bundle exec rake jasmine'
alias jasc='bundle exec rake jasmine:ci'
alias rs='bundle exec rspec spec'
alias rdm='echo "rake db:migrate" && bundle exec rake db:migrate'
alias rdp='echo "rake db:test:prepare" && bundle exec rake db:test:prepare'
alias rdmp='rdm && rdp'
alias rdpop='echo "rake db:populate" && bundle exec rake db:populate'
alias bi='bundle install'
alias bu='bundle update'
alias pbc='pbcopy'
alias scd='python -m SimpleHTTPServer'
alias irbs='irb --simple-prompt'

function gcbpbc {
  gcb | pbcopy
}
